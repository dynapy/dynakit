---

title: FE


keywords: fastai
sidebar: home_sidebar

summary: "This module contains functions to generate parametric LS-Dyna simulations."
description: "This module contains functions to generate parametric LS-Dyna simulations."
nb_path: "10_FE.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 10_FE.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>c:\users\jobinj\anaconda3\envs\hbm\lib\site-packages\ipykernel\ipkernel.py:283: DeprecationWarning: `should_run_async` will not call `transform_cell` automatically in the future. Please pass the result to `transformed_cell` argument and any exception that happen during thetransform in `preprocessing_exc_tuple` in IPython 7.17 and above.
  and should_run_async(code)
</pre>
</div>
</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="FE" class="doc_header"><code>class</code> <code>FE</code><a href="https://github.com/dynapy/dynakit/tree/main/dynakit/FE.py#L20" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>FE</code>(<strong><code>settings</code></strong>)</p>
</blockquote>
<p>This Class contains set of methods which performs reading of the .yaml file and replaces values of the input parameters
with newly generated sample data sets. And then, new key files are generated for simulation.</p>
<hr>
<h2 id="---INPUTS">   INPUTS<a class="anchor-link" href="#---INPUTS"> </a></h2>
<pre><code>    settigs : Input file for FE simulations to get the user input</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Test">Test<a class="anchor-link" href="#Test"> </a></h1>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="n">cur_path</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
<span class="n">path</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cur_path</span><span class="p">,</span><span class="s1">&#39;example&#39;</span><span class="p">)</span>
<span class="n">base_path</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="s1">&#39;main&#39;</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;dynakit_FE.yaml&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
    <span class="n">a</span>  <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">Loader</span><span class="o">=</span><span class="n">yaml</span><span class="o">.</span><span class="n">FullLoader</span><span class="p">)</span> 
<span class="n">a</span><span class="p">[</span><span class="s1">&#39;baseline_path&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">base_path</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;dynakit_FE.yaml&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
    <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">file</span><span class="p">)</span> 
<span class="n">k</span><span class="o">=</span><span class="n">FE</span><span class="p">(</span><span class="s1">&#39;dynakit_FE.yaml&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="1.-Test-the-object">1. Test the object<a class="anchor-link" href="#1.-Test-the-object"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">path_cur</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_object</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">path_cur</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">path_cur</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s1">&#39;simulations//.dynakit&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">True</span>
    <span class="k">assert</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s1">&#39;simulations&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">True</span>
    
<span class="n">test_object</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">path_cur</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="2.-Test-Read_config">2. Test <code>Read_config</code><a class="anchor-link" href="#2.-Test-Read_config"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_Read_config</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
    <span class="n">df</span><span class="o">=</span><span class="n">k</span><span class="o">.</span><span class="n">Read_config</span><span class="p">()</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;FE_parameters.yaml&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">para_list</span>  <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">Loader</span><span class="o">=</span><span class="n">yaml</span><span class="o">.</span><span class="n">FullLoader</span><span class="p">)</span> 
    <span class="n">a</span><span class="o">=</span><span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">para_list</span><span class="p">[</span><span class="s1">&#39;parameters&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">para_list</span><span class="p">[</span><span class="s1">&#39;parameters&#39;</span><span class="p">][</span><span class="n">k</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;dynaParameter&#39;</span><span class="p">}</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">([</span><span class="o">*</span><span class="n">a</span><span class="o">.</span><span class="n">keys</span><span class="p">()])</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">([</span><span class="o">*</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="p">()][</span><span class="mi">0</span><span class="p">])</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
    <span class="k">assert</span> <span class="p">[</span><span class="o">*</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="p">()][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;max&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
    
<span class="n">test_Read_config</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="3.-Test-get_samples">3. Test <code>get_samples</code><a class="anchor-link" href="#3.-Test-get_samples"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_get_samples</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
    <span class="n">df</span><span class="o">=</span><span class="n">k</span><span class="o">.</span><span class="n">Read_config</span><span class="p">()</span>
    <span class="n">test_array</span><span class="o">=</span><span class="n">k</span><span class="o">.</span><span class="n">get_samples</span><span class="p">()</span>
    
    <span class="k">assert</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;min&#39;</span><span class="p">]</span><span class="o">&lt;</span><span class="nb">min</span><span class="p">(</span><span class="n">test_array</span><span class="p">[:,</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">assert</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;max&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="nb">max</span><span class="p">(</span><span class="n">test_array</span><span class="p">[:,</span><span class="mi">0</span><span class="p">])</span>
    
<span class="n">test_get_samples</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="4.-Test-generate_key_file">4. Test <code>generate_key_file</code><a class="anchor-link" href="#4.-Test-generate_key_file"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">path_cur</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_generate_key_file</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
    <span class="n">path</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span><span class="s1">&#39;simulations&#39;</span><span class="p">)</span>
    <span class="n">k</span><span class="o">.</span><span class="n">Read_config</span><span class="p">()</span>
    <span class="n">test_array</span><span class="o">=</span><span class="n">k</span><span class="o">.</span><span class="n">get_samples</span><span class="p">()</span>
    <span class="n">k</span><span class="o">.</span><span class="n">generate_key_file</span><span class="p">()</span>
    <span class="n">indx</span><span class="o">=</span><span class="nb">len</span><span class="p">([</span><span class="n">name</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;Run&#39;</span><span class="p">)])</span>
    
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">test_array</span><span class="p">)</span><span class="o">==</span><span class="n">indx</span>
    
<span class="n">test_generate_key_file</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="5.-Test-add-samples">5. Test <code>add samples</code><a class="anchor-link" href="#5.-Test-add-samples"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doe_path</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path_cur</span><span class="p">,</span><span class="s1">&#39;simulations/.dynakit&#39;</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">doe_path</span><span class="p">)</span>
<span class="n">doe_o</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;DOE.csv&quot;</span><span class="p">))</span>
<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">path_cur</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_add_samples</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;dynakit_FE.yaml&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">set_list</span>  <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">Loader</span><span class="o">=</span><span class="n">yaml</span><span class="o">.</span><span class="n">FullLoader</span><span class="p">)</span> 
    <span class="n">k_1</span><span class="o">=</span><span class="n">FE</span><span class="p">(</span><span class="s1">&#39;dynakit_FE.yaml&#39;</span><span class="p">)</span>
    <span class="n">k_1</span><span class="o">.</span><span class="n">Read_config</span><span class="p">()</span>
    <span class="n">k_1</span><span class="o">.</span><span class="n">add_samples</span><span class="p">()</span>
    <span class="n">doe_path</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path_cur</span><span class="p">,</span><span class="s1">&#39;simulations/.dynakit&#39;</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">doe_path</span><span class="p">)</span>
    <span class="n">doe_n</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;DOE.csv&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">doe_o</span><span class="o">+</span><span class="n">set_list</span><span class="p">[</span><span class="s1">&#39;simulations&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">doe_n</span><span class="p">)</span>
<span class="n">test_add_samples</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

